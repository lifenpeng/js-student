<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Array</title>
</head>
<body>
    <script>
        let arr = new Array(2);
        arr[2] = 3;
        console.log(arr);
        console.log(arr[0]);
        console.log(arr[2]);
        console.log(0 in arr);
        console.log(2 in arr);

        //Array作为构造函数，行为很不一致。因此，不建议使用它生成新数组，直接使用数组字面量是更好的做法
        let arr1 = [undefined];
        console.log(0 in arr1);
        
        let boole = Array.isArray(arr1);
        console.log(boole);

        //数组的valueOf方法返回数组本身。
        let value = arr1.valueOf();
        console.log(value);

        //数组的toString方法返回数组的字符串形式
        arr1[1] = 100;
        let str = arr1.toString();
        console.log(str);

        //pop方法用于删除数组的最后一个元素，并返回该元素
        arr1.pop();
        console.log(arr1);

        //shift()方法用于删除数组的第一个元素，并返回该元素
        let arr2 = [100,200,300];
        let temp;

        //通过arr2.shift()方法每次取出一个元素，从而遍历数组。
        //它的前提是数组元素不能是0或任何布尔值等于false的元素，因此这样的遍历不是很可靠。
        while(temp = arr2.shift()){
            console.log(temp);
        }

        console.log(arr2);

        arr2[0] = 600;
        arr2[1] = 800;

        arr2.unshift(200,400);
        console.log(arr2);

        let join = arr2.join('-');
        console.log(join);

        //concat方法用于多个数组的合并 也接受其他类型的值作为参数
        let arr3 = [789];
        let arr4 = [321];
        let arr5 = [653];
        let P_arr = arr3.concat(arr4,arr5,852,'856',{name:'xixi'});
        console.log(P_arr);

        //reverse方法用于颠倒排列数组元素，返回改变后的数组
        let rev = P_arr.reverse();
        console.log(rev);

        //slice方法用于提取目标数组的一部分，返回一个新数组，原数组不变
        //它的第一个参数为起始位置（从0开始），第二个参数为终止位置（但该位置的元素本身不包括在内）
        let sli = P_arr.slice(0,3);
        let slis = P_arr.slice(P_arr.length+1);
        console.log(sli);
        //如果第一个参数大于等于数组长度，或者第二个参数小于第一个参数，则返回空数组。
        console.log(slis);
        //slice方法的一个重要应用，是将类似数组的对象转为真正的数组。
        let Oarr = Array.prototype.slice.call({0:'0',1:'2',length:2});
        console.log(Oarr);

        //splice方法用于删除原数组的一部分成员，并可以在删除的位置添加新的数组成员，返回值是被删除的元素
        let Darr = Oarr.splice(0,1,arr2,6,8,'add');
        console.log(Oarr);

        //sort方法对数组成员进行排序，默认是按照字典顺序排序
        let Sarr = [101,11,22];
        let Soae = Sarr.sort();
        console.log(Soae);
        let Soac = Sarr.sort(function(v1,v2){
            return v1 - v2;
        });
        console.log(Soac);

        //map方法的回调函数有三个参数，elem为当前成员的值，index为当前成员的位置，arr为原数组
        let Noarr = Oarr.map(function(elem,index,arr){
            return elem.toString();
        });

        console.log(Noarr);

        //forEach方法与map方法很相似，也是对数组的所有成员依次执行参数函数。
        //但是，forEach方法不返回值，只用来操作数据。
        //这就是说，如果数组遍历的目的是为了得到返回值，那么使用map方法，否则使用forEach方法。
        //forEach方法无法中断执行，总是会将所有成员遍历完。如果希望符合某种条件时，就中断遍历，要使用for循环
        let Nstr = [];
        Noarr.forEach(function(item){
            //console.log(this);
            this.push('@'+item+'@');
        },Nstr);
        console.log(Nstr);

        //filter方法用于过滤数组成员，满足条件的成员组成一个新数组返回
        let Farr = Noarr.filter(function(item){
            return item.length>6;
        });

        console.log(Farr);

        //some方法是只要一个成员的返回值是true，则整个some方法的返回值就是true，否则返回false。
        let Zarr = [false,false,true,false,false];
        let bool = Zarr.some(function(item){
            return item;
        });
        console.log(bool);

        //every方法是所有成员的返回值都是true，整个every方法才返回true，否则返回false。

        let bools = Zarr.every(function(item){
            return item;
        });

        console.log(bools);
        
        //reduce依次处理数组的每个成员，最终累计为一个值 
        //reduceRight则是从右到左（从最后一个成员到第一个成员），其他完全一样。
        let num = [1,2,3,4,5];
        let nums = num.reduce(function(a,b){
            return a + b;
        });
        console.log(nums);

        //如果要对累积变量指定初值，可以把它放在reduce方法的第二个参数
        let snum = num.reduce(function(a,b){
            return a + b;
        },100);

        console.log(snum);

        //indexOf方法返回给定元素在数组中第一次出现的位置，如果没有出现则返回-1
        //lastIndexOf方法返回给定元素在数组中最后一次出现的位置，如果没有出现则返回-1

        let index = num.indexOf(5);
        console.log(index);

    </script>
</body>
</html>